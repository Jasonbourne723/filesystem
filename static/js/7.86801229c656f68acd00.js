webpackJsonp([7],{"KB+W":function(e,t){},Pyo5:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=i("P9l9"),n={data:function(){return{TableList:[{label:"角色名称",prop:"name"},{label:"备注",prop:"remark"}],Roles:[],Role:{},loading:!1,AddRoleVisible:!1,SetMenuPermissionVisible:!1,MenuTree:[],defaultProps:{children:"children",label:"title"},Menus:[],RoleId:0}},methods:{SaveMenuPermission:function(){var e=this,t=this.$refs.tree.getCheckedKeys();t.length>0&&Object(l.E)({roleId:this.RoleId,menuIds:t}).then(function(t){t.IsSuccess?(e.$notify({title:"成功",message:"设置成功",type:"success"}),e.SetMenuPermissionVisible=!1):e.$notify({title:"失败",message:t.Message,type:"error"})})},AlertSetMenuPermission:function(e){var t=this;this.SetMenuPermissionVisible=!0,Object(l.t)({roleId:e.id}).then(function(i){t.RoleId=e.id,i.IsSuccess?null!=i.TModel&&i.TModel.length>0&&t.$nextTick(function(){var e=new Array;i.TModel.forEach(function(t){e.push(t.id)}),t.$refs.tree.setCheckedKeys(e)}):t.$notify({title:"失败",message:i.Message,type:"error"})})},AddRole:function(){var e=this;this.Role.id>0?Object(l.I)(this.Role).then(function(t){t.IsSuccess?(e.GetRoles(),e.AddRoleVisible=!1):e.$notify({title:"失败",message:t.Message,type:"error"})}):Object(l.g)(this.Role).then(function(t){t.IsSuccess?(e.GetRoles(),e.AddRoleVisible=!1):e.$notify({title:"失败",message:t.Message,type:"error"})}),this.Role={}},GetRoles:function(){var e=this;this.loading=!0,Object(l.l)().then(function(t){t.IsSuccess?e.Roles=t.TModel:e.$notify({title:"失败",message:t.Message,type:"error"})}),this.loading=!1},DeleteRole:function(e){var t=this;Object(l.B)({roleId:e.id}).then(function(e){e.IsSuccess?(t.$notify({title:"成功",message:"删除成功",type:"success"}),t.GetRoles()):t.$notify({title:"失败",message:e.Message,type:"error"})})}},created:function(){var e=this;Object(l.k)().then(function(t){if(t.IsSuccess){var i=t.TModel;e.Menus=i,null!=i&&i.length>0&&i.filter(function(e){return 0==e.parentId}).forEach(function(t){var l={id:t.id,title:t.title,children:[]};i.filter(function(e){return e.parentId==t.id}).forEach(function(e){var t={id:e.id,title:e.title,children:[]};i.filter(function(t){return t.parentId==e.id}).forEach(function(e){t.children.push({id:e.id,title:e.title})}),l.children.push(t)}),e.MenuTree.push(l)})}else e.$notify({title:"失败",message:t.Message,type:"error"})})}},s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.GetRoles}},[e._v(" 查询 ")]),e._v(" "),i("el-button",{attrs:{size:"small"},on:{click:function(t){e.Role={},e.AddRoleVisible=!0}}},[e._v(" 新增 ")]),e._v(" "),i("el-dialog",{attrs:{title:"编辑角色",visible:e.AddRoleVisible,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(t){e.AddRoleVisible=t}}},[i("div",{staticClass:"divdialog"},[i("el-input",{attrs:{type:"text",placeholder:"角色名称"},model:{value:e.Role.name,callback:function(t){e.$set(e.Role,"name",t)},expression:"Role.name"}}),e._v(" "),i("el-input",{attrs:{type:"text",placeholder:"角色备注"},model:{value:e.Role.remark,callback:function(t){e.$set(e.Role,"remark",t)},expression:"Role.remark"}}),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.AddRole}},[e._v("确 定")]),e._v(" "),i("el-button",{on:{click:function(t){e.AddRoleVisible=!1}}},[e._v("取 消")])],1)]),e._v(" "),i("el-dialog",{attrs:{title:"配置菜单权限",visible:e.SetMenuPermissionVisible,"check-strictly":"true",width:"30%","close-on-click-modal":!1},on:{"update:visible":function(t){e.SetMenuPermissionVisible=t}}},[i("div",{staticStyle:{"margin-left":"20px"}},[i("el-tree",{ref:"tree",attrs:{data:e.MenuTree,"show-checkbox":"","default-expand-all":"","node-key":"id","highlight-current":"",props:e.defaultProps}}),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.SaveMenuPermission}},[e._v(" 设置")]),e._v(" "),i("el-button",{on:{click:function(t){e.SetMenuPermissionVisible=!1}}},[e._v("  取消")])],1)]),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.Roles,size:"mini"}},[e._l(e.TableList,function(e,t){return i("el-table-column",{key:t,attrs:{label:e.label,prop:e.prop}})}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"200",heigth:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text",disabled:1==t.row.type},on:{click:function(i){e.Role=t.row,e.AddRoleVisible=!0}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{type:"text",disabled:1==t.row.type},on:{click:function(i){return e.AlertSetMenuPermission(t.row)}}},[e._v("\n                    配置菜单权限\n                ")]),e._v(" "),i("el-popconfirm",{attrs:{title:"确认执行删除操作吗"},on:{onConfirm:function(i){return e.DeleteRole(t.row)}}},[i("el-button",{attrs:{slot:"reference",type:"text",disabled:1==t.row.type},slot:"reference"},[e._v("删除")])],1)]}}])})],2)],1)},staticRenderFns:[]};var o=i("VU/8")(n,s,!1,function(e){i("KB+W")},null,null);t.default=o.exports}});
//# sourceMappingURL=7.86801229c656f68acd00.js.map