webpackJsonp([3],{"9f0F":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("P9l9"),o={data:function(){return{Blogs:[],RecordCount:0,CategoryId:"",Name:"",PageIndex:1,Categorys:[],PostStatus:[{id:0,name:"未发布"},{id:1,name:"已发布"},{id:2,name:"全部"}],Status:2}},methods:{GetCatetory:function(){var t=this;Object(n.r)().then(function(e){e.IsSuccess&&(t.Categorys=e.TModel)})},StatusName:function(t,e){return 0==t.status?"未发布":"已发布"},IsTop:function(t,e){return 0==t.isTop?"否":"是"},CreateTime:function(t,e){var a=new Date(t.createDate);return this.$utils.ToDateTime(a)},CurrentChange:function(t){this.PageIndex=t,this.GetBlogs()},HandleShow:function(t,e){this.$router.push({path:"/Blog/"+e.id})},HandleEdit:function(t,e){this.$router.push({path:"/EditBlog",query:{id:e.id}})},HandleDelete:function(t,e){var a=this;console.log(t,e),Object(n.i)({id:e.id}).then(function(t){t.IsSuccess?(a.$notify({title:"成功",message:"删除成功",type:"success"}),a.GetBlogs()):a.$notify({title:"失败",message:t.message,type:"error"})})},GetBlogs:function(){var t=this,e={pageIndex:this.PageIndex,pageSize:10,filter:[],sort:[{field:"isDel",value:"asc"},{field:"id",value:"desc"}]};this.CategoryId>0&&e.filter.push({field:"categoryId",value:this.CategoryId.toString(),operator:"=",connector:"and"}),null!=this.Name&&void 0!=this.Name&&""!=this.Name&&e.filter.push({field:"name",value:"%"+this.Name+"%",operator:"like",connector:"and"}),this.Status<2&&e.filter.push({field:"status",value:this.Status.toString(),operator:"=",connector:"and"}),Object(n.q)(e).then(function(e){e.IsSuccess&&(t.Blogs=e.TModel,t.RecordCount=e.RecordCount)})}},created:function(){this.PageIndex=1,this.GetCatetory(),this.GetBlogs()},mounted:function(){},watch:{$route:function(t,e){this.PageIndex=1,this.CategoryId=this.$route.query.categoryId,this.Name=this.$route.query.name,this.GetBlogs()}},computed:{}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.GetBlogs}},[t._v("查询")])],1),t._v(" "),a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"文章标题"},model:{value:t.Name,callback:function(e){t.Name=e},expression:"Name"}}),t._v(" "),a("span",{staticStyle:{margin:"20px"}}),t._v(" "),a("el-select",{attrs:{placeholder:"分类",clearable:!0},model:{value:t.CategoryId,callback:function(e){t.CategoryId=e},expression:"CategoryId"}},t._l(t.Categorys,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1),t._v(" "),a("span",{staticStyle:{margin:"20px"}}),t._v(" "),a("el-select",{attrs:{placeholder:"发布状态",clearable:!0},model:{value:t.Status,callback:function(e){t.Status=e},expression:"Status"}},t._l(t.PostStatus,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.Blogs,size:"large"}},[a("el-table-column",{attrs:{prop:"name",label:"标题",width:"400"}}),t._v(" "),a("el-table-column",{attrs:{prop:"categoryName",label:"分类",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{formatter:t.CreateTime,label:"发布日期",width:"300"}}),t._v(" "),a("el-table-column",{attrs:{formatter:t.StatusName,label:"发布状态",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{formatter:t.IsTop,label:"置顶",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.HandleEdit(e.$index,e.row)}}},[t._v("编辑")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.HandleShow(e.$index,e.row)}}},[t._v("查看")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popconfirm",{attrs:{title:"确认执行此操作吗"},on:{onConfirm:function(a){return t.HandleDelete(e.$index,e.row)}}},[a("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("\n                        "+t._s(1==e.row.isDel?"还原":"删除")+"\n                    ")])],1)]}}])})],1),t._v(" "),a("div",{staticStyle:{"text-align":"left",margin:"20px"}},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","hide-on-single-page":!0,total:t.RecordCount,"current-page":t.PageIndex,small:!0,"page-size":10},on:{"update:currentPage":function(e){t.PageIndex=e},"update:current-page":function(e){t.PageIndex=e},"current-change":t.CurrentChange}})],1)],1)},staticRenderFns:[]};var r=a("VU/8")(o,l,!1,function(t){a("Ddix")},null,null);e.default=r.exports},Ddix:function(t,e){}});
//# sourceMappingURL=3.08ee685a1e18ac70a677.js.map